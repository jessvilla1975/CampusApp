<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="stylesheet" href="new-password.component.css">
  <title>New-password - CampusRide</title>
</head>

<body>
  <app-header></app-header> <!-- Encabezado común para todas las páginas -->
  <!-- Contenido para establecer nueva contraseña -->
  <main class="newpassword-container">
    <div class="image-container">
      <img src="assets/images/fondologin.png" alt="Fondo de establecimiento de nueva contraseña" class="background-image">
    </div>
    <div class="newpassword-box">
      <h1 class="title">CAMPUSRIDE</h1>
      <h2 class="newpassword-header">ESTABLECER NUEVA CONTRASEÑA</h2>
      <p class="newpassword-subtitulo">Ingresa tu nueva contraseña para restablecer tu acceso a la cuenta.</p>

      <form [formGroup]="establecerPassword" (ngSubmit)="onSubmit()">
        <!-- Campo Nueva Contraseña con Mostrar/Ocultar -->
        <div class="form-group">
          <label for="password">Nueva Contraseña</label>
          <div class="password-container">
            <input
              [type]="isPasswordVisible ? 'text' : 'password'"
              id="password"
              formControlName="nuevaContrasena"
              placeholder="Ingresa tu nueva contraseña"
              required>
            <img
              src="assets/images/ojo_cerrado.png"
              class="toggle-password"
              alt="Mostrar/Ocultar Contraseña"
              (click)="togglePasswordVisibility()"
              [src]="isPasswordVisible ? 'assets/images/ojo_abierto.png' : 'assets/images/ojo_cerrado.png'">
          </div>
          <div *ngIf="establecerPassword.get('nuevaContrasena')?.invalid && (establecerPassword.get('nuevaContrasena')?.touched || establecerPassword.get('nuevaContrasena')?.dirty)">
            <small class="error" *ngIf="establecerPassword.get('nuevaContrasena')?.errors?.['required']">La contraseña es obligatoria.</small>
            <small class="error" *ngIf="establecerPassword.get('nuevaContrasena')?.errors?.['minlength']">La contraseña debe tener al menos 6 caracteres.</small>
          </div>
        </div>

        <!-- Campo Confirmar Contraseña con Mostrar/Ocultar -->
        <div class="form-group">
          <label for="confirmPassword">Confirmar Contraseña</label>
          <div class="password-container">
            <input
              [type]="isConfirmPasswordVisible ? 'text' : 'password'"
              id="confirmPassword"
              formControlName="confirmarContrasena"
              placeholder="Confirma tu nueva contraseña"
              required>
            <img
              src="assets/images/ojo_cerrado.png"
              class="toggle-password"
              alt="Mostrar/Ocultar Contraseña"
              (click)="toggleConfirmPasswordVisibility()"
              [src]="isConfirmPasswordVisible ? 'assets/images/ojo_abierto.png' : 'assets/images/ojo_cerrado.png'">
          </div>
          <div *ngIf="establecerPassword.get('confirmarContrasena')?.invalid && (establecerPassword.get('confirmarContrasena')?.touched || establecerPassword.get('confirmarContrasena')?.dirty)">
            <small class="error">Debes confirmar tu contraseña.</small>
          </div>
        </div>

        <div class="form-group">
          <button type="submit" class="bt">Establecer Contraseña</button>
        </div>
      </form>
    </div>
  </main>
</body>
</html>
